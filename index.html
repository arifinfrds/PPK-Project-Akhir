<!DOCTYPE html>
<html>

<head>

    <style>
        p {
            font-family: Arial, sans-serif;
        }
    </style>

    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.3.1/jquery.mobile-1.3.1.min.css" />
    <script src="http://code.jquery.com/jquery-1.9.1.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.3.1/jquery.mobile-1.3.1.min.js"></script>


    <script>

        var objDays = [];
        var daysList = [];
        var rooms = [];
        var exams = [];

        function fetchData() {
            // alert('fetch data');
            $.getJSON("https://filkom.ub.ac.id/info/jadwal_ujian", function (data) {

                var aDay = null;

                console.log('data : ' + data);

                // fetch hari
                $.each(data, function (key, daysResponse) {
                    objDays.push("<li id='" + key + "'>" + daysResponse + "</li>");
                    console.log('key : ' + key);
                    daysList.push('<li id="' + key + '">' + key + '</li>');


                    // outputkan ke console
                    // console.log(JSON.stringify(val));
                    aDay = daysResponse;
                    objDays.push(daysResponse);

                    // loop di tiap-tiap hari buat dapetin ruangan apa aja
                    $.each(daysResponse, function (key, roomsResponse) {
                        // console.log(roomsResponse);
                        rooms.push(roomsResponse);

                        // loop di tiap-tiap ruangan buat dapet ujian di ruangan tsb apa aja
                        $.each(roomsResponse, function (key, ujianResponse) {
                            // console.log(ujianResponse['matakuliah']);
                            exams.push(ujianResponse);
                        });

                    });

                });

                updateUI();

                $("<ul/>", {
                    "class": "my-new-list",
                    html: objDays.join("")
                }).appendTo("body");

                // print semua exams
                // for (const exam in exams) {
                //     if (exams.hasOwnProperty(exam)) {
                //         const element = exams[exam];
                //         // console.log(element);
                //     }
                // }

                // // print semua hari
                // for (const day in objDays) {
                //     if (objDays.hasOwnProperty(day)) {
                //         const element = objDays[day];
                //         console.log(element);
                //     }
                // }
            });
        }

        function updateUI() {
            console.log('updateUI()');

            // print semua hari
            for (const day in objDays) {
                if (objDays.hasOwnProperty(day)) {
                    const element = objDays[day];
                    // console.log(element);
                    // typeof objDays;
                }
            }

            // get nama2 hari dan tampilkan
            daysList.forEach(element => {
                console.log(element);
                // document.getElementById('my-new-list').innerHTML += (element);
                

            });

        }

    </script>
</head>

<body>

    <div data-role="header">
        <h2>Hari Ujian</h2>
        <a href="#" class="ui-btn ui-corner-all ui-btn-inline ui-mini footer-button-left ui-btn-icon-left ui-icon-power">Quit</a>
        <a href="#" class="ui-btn ui-corner-all ui-btn-inline ui-mini footer-button-right ui-btn-icon-right ui-icon-carat-r">Next</a>
    </div>

    <ul data-role="listview" class="my-new-list">
        <li>
            <a href="#">Acura</a>
        </li>
        <li>
            <a href="#">Audi</a>
        </li>
        <li>
            <a href="#">BMW</a>
        </li>
        <li>
            <a href="#">Cadillac</a>
        </li>
        <li>
            <a href="#">Ferrari</a>
        </li>
    </ul>

    <script>
        jQuery(document).ready(function ($) {
            console.log('jQuery - ready');
            fetchData();
        })
        // window.onload = function what() {
        //     console.log('jQuery - ready');
        //     fetchData();
        // };
    </script>

</body>

</html>